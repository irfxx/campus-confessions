<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíñ Campus Confessions ‚Äî Valentine's Edition</title>

<style>
/* =========================
   GLOBAL STYLES
========================= */
* {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #2b0a1f, #4a0d2a, #1a0313);
    color: #fff;
    overflow-x: hidden;
}

/* Floating Hearts Background */
.background-hearts {
    position: fixed;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: -1;
}

.background-hearts span {
    position: absolute;
    bottom: -50px;
    font-size: 20px;
    animation: floatUp linear infinite;
    opacity: 0.6;
}

@keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity: 0.6; }
    100% { transform: translateY(-120vh) scale(1.5); opacity: 0; }
}

/* =========================
   LAYOUT
========================= */
header {
    text-align: center;
    padding: 20px;
    font-size: 28px;
    font-weight: bold;
    background: rgba(255, 0, 90, 0.15);
    backdrop-filter: blur(10px);
}

.container {
    max-width: 900px;
    margin: auto;
    padding: 20px;
}

/* =========================
   GLASS CARD
========================= */
.glass-card {
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 105, 180, 0.4);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 20px;
    backdrop-filter: blur(15px);
    transition: 0.3s ease;
}

.glass-card:hover {
    box-shadow: 0 0 20px rgba(255, 20, 147, 0.5);
}

/* =========================
   COMPOSE
========================= */
textarea {
    width: 100%;
    background: transparent;
    border: none;
    color: white;
    resize: none;
    font-size: 16px;
    outline: none;
}

.compose-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

button {
    background: #ff2e75;
    border: none;
    color: white;
    padding: 8px 14px;
    border-radius: 20px;
    cursor: pointer;
    transition: 0.3s;
}

button:hover {
    box-shadow: 0 0 15px hotpink;
}

/* Love Letter Mode */
.love-mode {
    border: 2px dashed pink;
    background: rgba(255, 192, 203, 0.1);
}

/* =========================
   POSTS
========================= */
.post-footer {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    font-size: 14px;
}

.action {
    cursor: pointer;
    transition: 0.3s;
}

.action:hover {
    color: hotpink;
}

/* Rose animation */
.rose-burst {
    position: absolute;
    animation: burst 0.8s ease forwards;
}

@keyframes burst {
    0% { transform: scale(0.5); opacity: 1; }
    100% { transform: scale(2); opacity: 0; }
}

/* =========================
   MUSIC CONTROLS
========================= */
.music-controls {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 105, 180, 0.3);
    border-radius: 25px;
    padding: 8px 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 1000;
    transition: all 0.3s ease;
}

.music-controls:hover {
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 20px rgba(255, 105, 180, 0.3);
}

.music-btn {
    background: none;
    border: none;
    color: #ffeef8;
    font-size: 18px;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 5px;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.music-btn:hover {
    background: rgba(255, 105, 180, 0.2);
    transform: scale(1.1);
}

.music-label {
    color: #ffeef8;
    font-size: 12px;
    font-weight: 500;
}

/* =========================
   TOAST
========================= */
.toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #ff2e75;
    padding: 10px 16px;
    border-radius: 8px;
    display: none;
}

/* =========================
   QUIZ
========================= */
.quiz {
    background: rgba(255,255,255,0.05);
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 20px;
}
</style>
</head>

<body>

<div class="background-hearts" id="hearts"></div>

<header>üíñ Campus Confessions ‚Äî Valentine's Edition</header>

<!-- Background Love Music -->
<audio id="loveMusic" loop>
    <!-- Local fallback files -->
    <source src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAADhAAzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMz//////////////////////////////////////////////////////////////////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAQKAAAAAAAAA4A" type="audio/mpeg">
    <!-- Online sources -->
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    <source src="https://www.bensound.com/bensound-music/bensound-romantic.mp3" type="audio/mpeg">
    <source src="https://www.bensound.com/bensound-music/bensound-love.mp3" type="audio/mpeg">
</audio>

<!-- Music Controls -->
<div class="music-controls">
    <span class="music-label">üíï Love Music</span>
    <button class="music-btn" id="playBtn" onclick="toggleMusic()">‚ñ∂Ô∏è</button>
    <button class="music-btn" id="muteBtn" onclick="toggleMute()">üîä</button>
</div>

<div class="container">

    <!-- QUIZ -->
    <div class="quiz glass-card">
        <h3>üíò Compatibility Quiz</h3>
        <p>What's your love language?</p>
        <button onclick="quizResult()">Acts of Service</button>
        <button onclick="quizResult()">Words of Affirmation</button>
        <button onclick="quizResult()">Gifts</button>
    </div>

    <!-- COMPOSE -->
    <div class="glass-card" id="composeCard">
        <textarea id="confessionInput" rows="4" maxlength="200" placeholder="Write your confession..."></textarea>
        <div class="compose-actions">
            <div>
                <label><input type="checkbox" id="loveMode"> üíå Love Letter Mode</label>
                <label><input type="checkbox" id="crushTag"> üíò Secret Crush</label>
            </div>
            <div>
                <span id="counter">0/200</span>
                <button onclick="postConfession()">Post</button>
            </div>
        </div>
    </div>

    <!-- POSTS -->
    <div id="feed"></div>

</div>

<div class="toast" id="toast"></div>

<script>
const heartsContainer = document.getElementById("hearts");
const loveMusic = document.getElementById("loveMusic");
const playBtn = document.getElementById("playBtn");
const muteBtn = document.getElementById("muteBtn");

let isPlaying = false;
let isMuted = false;

/* Music Control Functions */
function toggleMusic() {
    if (isPlaying) {
        loveMusic.pause();
        playBtn.textContent = "‚ñ∂Ô∏è";
        showToast("Music paused ‚è∏Ô∏è");
    } else {
        // Try to play with error handling
        const playPromise = loveMusic.play();
        
        if (playPromise !== undefined) {
            playPromise.then(() => {
                playBtn.textContent = "‚è∏Ô∏è";
                showToast("Playing romantic music üéµ");
            }).catch(error => {
                console.error('Audio play failed:', error);
                showToast("Click play button again to start music üéµ");
                
                // Try loading a different source
                loadAlternativeSource();
            });
        }
    }
    isPlaying = !isPlaying;
}

function toggleMute() {
    if (isMuted) {
        loveMusic.muted = false;
        muteBtn.textContent = "üîä";
        showToast("Music unmuted üîä");
    } else {
        loveMusic.muted = true;
        muteBtn.textContent = "üîá";
        showToast("Music muted üîá");
    }
    isMuted = !isMuted;
}

function loadAlternativeSource() {
    // Try loading from a different source if current one fails
    const sources = loveMusic.querySelectorAll('source');
    let currentSourceIndex = 0;
    
    for (let i = 0; i < sources.length; i++) {
        if (loveMusic.src === sources[i].src) {
            currentSourceIndex = i;
            break;
        }
    }
    
    // Try next source
    const nextIndex = (currentSourceIndex + 1) % sources.length;
    loveMusic.src = sources[nextIndex].src;
    loveMusic.load();
}

/* Auto-play music on page load (with user interaction fallback) */
document.addEventListener('DOMContentLoaded', () => {
    // Set volume and try to auto-play
    loveMusic.volume = 0.3;
    loveMusic.load(); // Preload the audio
    
    // Add error handling
    loveMusic.addEventListener('error', (e) => {
        console.error('Audio error:', e);
        showToast("Music loading failed. Try clicking play button üéµ");
    });
    
    loveMusic.addEventListener('loadeddata', () => {
        console.log('Audio loaded successfully');
    });
    
    // Try auto-play after a short delay
    setTimeout(() => {
        loveMusic.play().then(() => {
            isPlaying = true;
            playBtn.textContent = "‚è∏Ô∏è";
            showToast("Romantic music started üéµ");
        }).catch(() => {
            // Auto-play failed, wait for user interaction
            showToast("Click play button to start romantic music üéµ");
        });
    }, 1000);
});

/* Floating hearts */
for (let i = 0; i < 20; i++) {
    let heart = document.createElement("span");
    heart.innerText = "üíñ";
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.animationDuration = (5 + Math.random() * 5) + "s";
    heartsContainer.appendChild(heart);
}

/* Character Counter */
const input = document.getElementById("confessionInput");
input.addEventListener("input", () => {
    document.getElementById("counter").innerText =
        input.value.length + "/200";
});

/* Toast */
function showToast(msg) {
    const toast = document.getElementById("toast");
    toast.innerText = msg;
    toast.style.display = "block";
    setTimeout(() => toast.style.display = "none", 2000);
}

/* Post confession */
function postConfession() {
    const text = input.value.trim();
    if (!text) return;

    const feed = document.getElementById("feed");

    const card = document.createElement("div");
    card.className = "glass-card";

    if (document.getElementById("loveMode").checked) {
        card.classList.add("love-mode");
    }

    let tag = "";
    if (document.getElementById("crushTag").checked) {
        tag = " üíò #SecretCrush";
        heartBurst();
    }

    card.innerHTML = `
        <p>${text}${tag}</p>
        <div class="post-footer">
            <span class="action" onclick="sendRose(this)">üåπ 0</span>
            <span class="action" onclick="likePost(this)">‚ù§Ô∏è 0</span>
            <span class="action" onclick="bookmarkPost()">üîñ</span>
        </div>
    `;

    feed.prepend(card);
    input.value = "";
    showToast("Confession posted üíñ");
}

/* Actions */
function likePost(el) {
    let count = parseInt(el.innerText.split(" ")[1]);
    el.innerText = "‚ù§Ô∏è " + (count + 1);
}

function sendRose(el) {
    let count = parseInt(el.innerText.split(" ")[1]);
    el.innerText = "üåπ " + (count + 1);
    heartBurst();
}

function bookmarkPost() {
    showToast("Saved üíæ");
}

/* Heart Burst */
function heartBurst() {
    const burst = document.createElement("div");
    burst.className = "rose-burst";
    burst.innerText = "üíñ";
    burst.style.left = "50%";
    burst.style.top = "50%";
    document.body.appendChild(burst);
    setTimeout(() => burst.remove(), 800);
}

/* Quiz */
function quizResult() {
    showToast("You're 95% compatible with someone here üíò");
}
</script>

</body>
</html>
